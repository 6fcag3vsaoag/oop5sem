# Лабораторная работа №9. Практические приемы использования шаблонов классов. Реализация механизма транзакций

## Цель работы
Получение навыков в разработке программ с использованием шаблонов классов и механизма транзакций.

## Задание
К решению задачи из лабораторной работы № 8 добавить механизм транзакций – возможность закрепить или отменить выполненные изменения.
Для этого необходимо хранить состояние объекта на заданный момент, начало транзакции, и в момент принятия решения уничтожать предыдущее состояние (закрепление) или возвращаться к нему (отмена). Для обслуживания транзакций использовать smart-указатель. Основой его являются два указателя – один на текущий объект, а второй – на объект, представляющий его предыдущее состояние, и три функции - старт, закрепление, отмена.

## Структура проекта
- `Stack.h` - Шаблон класса стека
- `Car.h` / `Car.cpp` - Класс автомобиля
- `Parking.h` / `Parking.cpp` - Класс гаражной стоянки
- `Transaction.h` / `Transaction.cpp` - Класс транзакции
- `main.cpp` - Основной файл программы из lab8
- `main_smart.cpp` - Файл демонстрации smart-указателей из lab8
- `main_transaction.cpp` - Новый файл с демонстрацией механизма транзакций
- `Makefile` - Файл для сборки проекта
- `README.md` - Этот файл

## Контрольные вопросы

1. **Что называется транзакцией?**
   Транзакция - это последовательность операций, которая выполняется как единое целое. Транзакция либо выполняется полностью, либо не выполняется вообще. В контексте программирования транзакция обеспечивает согласованность данных и позволяет откатить изменения в случае ошибки.

2. **Назовите свойства транзакций.**
   Свойства транзакций описываются аббревиатурой ACID:
   - **Атомарность (Atomicity)**: Все операции транзакции выполняются как единое целое. Если одна операция не выполнена, все изменения отменяются.
   - **Согласованность (Consistency)**: Транзакция переводит систему из одного согласованного состояния в другое согласованное состояние.
   - **Изолированность (Isolation)**: Одновременно выполняющиеся транзакции не влияют друг на друга.
   - **Долговечность (Durability)**: После успешного завершения транзакции все изменения сохраняются и не теряются даже при сбоях системы.

3. **Опишите стратегию работы с транзакциями.**
   Стратегия работы с транзакциями включает следующие этапы:
   - **Начало транзакции**: Инициализация транзакции и сохранение текущего состояния данных.
   - **Выполнение операций**: Выполнение всех необходимых операций в рамках транзакции.
   - **Принятие решения**: Определение, следует ли зафиксировать изменения или откатить их.
   - **Фиксация (commit)**: Сохранение всех изменений и освобождение ресурсов.
   - **Откат (rollback)**: Восстановление предыдущего состояния данных и освобождение ресурсов.

4. **В чем преимущество смарт-указателей при работе с транзакциями?**
   Преимущества смарт-указателей при работе с транзакциями:
   - **Автоматическое управление памятью**: Смарт-указатели автоматически освобождают память, что предотвращает утечки памяти.
   - **Безопасность**: Смарт-указатели предотвращают доступ к освобожденной памяти.
   - **Удобство использования**: Смарт-указатели обеспечивают автоматическое управление временем жизни объектов, что упрощает реализацию транзакций.
   - **Исключение дублирования кода**: Не нужно вручную освобождать память в нескольких местах, что снижает вероятность ошибок.